<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Bosque Encantado</title>

<style>
body {
    background: #0f172a;
    color: white;
    font-family: Arial;
    margin: 0;
}

.top {
    display: flex;
    justify-content: space-around;
    padding: 20px;
}

.barra {
    width: 260px;
    height: 18px;
    background: #334155;
    border-radius: 10px;
    overflow: hidden;
}

.vida {
    height: 100%;
    background: #22c55e;
    transition: width 0.4s;
}

.enemigo {
    background: #ef4444;
}

.historia {
    text-align: center;
    margin: 40px;
    font-size: 18px;
    min-height: 120px;
}

.botones {
    text-align: center;
}

button {
    padding: 10px 18px;
    margin: 6px;
    font-size: 16px;
    cursor: pointer;
}

button:disabled {
    opacity: 0.4;
}
</style>
</head>

<body>

<div class="top">
    <div>
        <h3>üõ°Ô∏è Caballero (Nivel <span id="nivel">1</span>)</h3>
        <div class="barra">
            <div id="vidaJugador" class="vida"></div>
        </div>
        <p>Puntos: <span id="puntos">0</span></p>
    </div>

    <div>
        <h3 id="enemigo">Enemigo</h3>
        <div class="barra">
            <div id="vidaEnemigo" class="vida enemigo"></div>
        </div>
    </div>
</div>

<div class="historia" id="mensaje">Cargando...</div>

<div class="botones">
    <button onclick="accion('iniciar')">‚ñ∂Ô∏è Iniciar</button>
    <button onclick="accion('atacar')">‚öîÔ∏è Atacar</button>
    <button onclick="accion('interactuar')">ü§ù Interactuar</button>
    <button onclick="accion('huir')">üèÉ Huir</button>
    <button id="btnPower" onclick="accion('powerup')">‚ú® Power-Up</button>
</div>

<script>
async function accion(tipo) {
    const r = await fetch("/" + tipo);
    const d = await r.json();
    actualizar(d);
}

function actualizar(d) {
    mensaje.innerText = d.mensaje || "";

    vidaJugador.style.width =
        (d.jugador_vida / d.jugador_vida_max * 100) + "%";

    vidaEnemigo.style.width =
        (d.enemigo_vida / d.enemigo_vida_max * 100) + "%";

    nivel.innerText = d.jugador_nivel;
    puntos.innerText = d.jugador_puntos;
    enemigo.innerText = d.enemigo_nombre;

    btnPower.disabled = !d.powerup_disponible;
}

accion("estado");
</script>

</body>
</html>



